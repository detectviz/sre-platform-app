<!--
同步影響報告 (2025-10-02)
版本變更：無 → 1.0.0
修改原則：所有 5 項原則（新憲法）
新增章節：技術標準、開發工作流程
移除章節：無
需要更新的範本：plan-template.md（憲法檢查參考）、spec-template.md（無需變更）、tasks-template.md（無需變更）
後續待辦事項：無
-->
# SRE 平台憲法

## 核心原則

### 一、觀測性與可靠性優先
所有系統組件必須具有完整的觀測性，包括全面的監控、記錄和告警功能。每個功能實現必須包含健康檢查、指標收集和故障檢測機制。系統可靠性是不容協商的 - 任何功能不得損害系統穩定性或觀測性。

### 二、資料治理與血緣追蹤
所有資料流必須維持從來源到消費的完整可追溯性。每個資料轉換、儲存和使用都必須記錄在資料血緣系統中。資料治理優先於所有其他考量 - AI 洞察、自動化決策和使用者操作都必須完全可審計和驗證。

### 三、安全性與多租戶架構
多租戶資料隔離必須是絕對的，不允許跨租戶資料洩漏。所有存取都必須遵循基於角色的存取控制 (RBAC) 並配合審計記錄。安全性驗證在任何資料操作之前發生，並且符合安全性標準 (GDPR、ISO27001) 對所有功能都是強制性的。

### 四、自動化與智慧
自動化工作流程必須結合 AI 決策制定與可靠的執行引擎。所有自動化操作必須可審計、可逆轉，並包含人工監督功能。智慧功能必須提供可解釋的推理邏輯並維持資料血緣以進行決策追蹤。

### 五、標準與一致性
所有程式碼、API 和資料結構都必須遵循既定的慣例：snake_case 命名、全面驗證、結構化錯誤處理和一致的模式。重大變更需要明確的理由說明和遷移計劃。標準確保可維護性並防止技術債務累積。

## 技術標準

### 技術棧要求
- 前端：React 19+、TypeScript、Vite 建置系統
- 後端：Node.js Mock 伺服器，具備全面的 API 驗證
- 資料庫：PostgreSQL，強制執行外鍵和約束條件
- 認證：Keycloak 整合，用於 SSO 和 RBAC
- 監控：Prometheus 指標、結構化記錄、健康檢查
- 自動化：n8n 工作流程引擎與 ADK AI 決策層

### 部署與基礎設施
- 多環境支援：開發、預備、生產
- 容器化部署與 Kubernetes 協調
- CI/CD 管道，包含自動化測試和安全掃描
- 基礎設施即程式碼，用於可重現的部署
- 在網路、資料庫和應用程式層級實現多租戶隔離

## 開發工作流程

### 結構化開發階段
所有功能開發都必須遵循既定的 P0-P3 分階段方法：
- P0：緊急修復和關鍵基礎設施
- P1：重要的驗證和安全增強
- P2：功能完整性和 API 標準化
- P3：進階優化和使用者體驗改善

### 品質關卡
- 程式碼審查必須驗證憲法合規性
- 自動化測試必須達到關鍵路徑的 100% 覆蓋率
- 任何資料處理變更都需要安全審查
- 效能基準必須建立並監控
- 任何 API 或行為變更都必須更新文檔

### 測試紀律
- 合約測試必須在實作前驗證 API 規格
- 所有使用者工作流程都需要整合測試
- 安全測試必須包含滲透測試和合規驗證
- 效能測試必須根據既定的 SLI/SLO 進行驗證

## 治理

憲法優先於所有其他專案指導方針和實務。所有 PR 和實作都必須證明符合這些原則。修正案需要：
1. 對變更的明確理由說明
2. 對現有功能的影響評估
3. 受影響程式碼的遷移計劃
4. 技術領導團隊的批准
5. 文檔更新和團隊溝通

定期合規審查確保持續遵守。憲法違規會阻擋部署，直到問題解決為止。複雜性必須加以說明 - 除非證明不足，否則偏好更簡單的解決方案。

**版本**：1.0.0 | **通過日期**：2025-10-02 | **最後修訂**：2025-10-02