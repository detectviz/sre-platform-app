# 消除瑣務 (Eliminating Toil)

作者：Vivek Rau 編輯：Betsy Beyer

> 如果一個人類操作員在正常操作期間需要接觸您的系統，那麼您就有一個錯誤。正常的定義隨著您的系統成長而改變。
>
> Carla Geisser，Google SRE

在 SRE 中，我們希望將時間花在長期的工程專案工作上，而不是運營工作上。因為「運營工作」這個詞可能會被誤解，所以我們使用一個特定的詞：**瑣務 (toil)**。

## 瑣務的定義

瑣務不僅僅是「我不喜歡做的工作」。它也不等同於行政雜務或骯髒的工作。對於哪些類型的工作是令人滿意和愉快的，偏好因人而異，有些人甚至喜歡手動、重複性的工作。還有一些必須完成的行政雜務，但不應歸類為瑣務：這是**開銷 (overhead)**。開銷通常是與運行生產服務不直接相關的工作，包括團隊會議、設定和評估目標 19、摘要 20 和人力資源文書工作等任務。骯髒的工作有時可能具有長期價值，在這種情況下，它也不是瑣務。清理服務的整個警報配置並移除雜亂可能很骯髒，但這不是瑣務。

那麼什麼是瑣務呢？瑣務是與運行生產服務相關的那種工作，它往往是**手動的、重複的、可自動化的、戰術性的、缺乏持久價值**的，並且**隨著服務的增長而線性擴展**。並非所有被視為瑣務的任務都具有所有這些屬性，但一項工作越符合以下一個或多個描述，它就越有可能是瑣務：

# 為什麼瑣務越少越好

我們的 SRE 組織有一個公開的目標，即將每個 SRE 的運營工作（即瑣務）保持在 50% 以下。每個 SRE 至少 50% 的時間應該花在工程專案工作上，這些工作要麼減少未來的瑣務，要麼增加服務功能。功能開發通常專注於提高可靠性、性能或利用率，這通常會作為第二級效應減少瑣務。

我們共享這個 50% 的目標，因為如果不加以控制，瑣務往往會擴大，並能迅速佔滿每個人 100% 的時間。減少瑣務和擴展服務的工作是網站可靠性工程中的「工程」。工程工作使 SRE 組織能夠以次線性的方式隨著服務規模的擴大而擴展，並比純開發團隊或純運營團隊更有效地管理服務。

此外，當我們招聘新的 SRE 時，我們向他們承諾 SRE 不是一個典型的運營組織，並引用了剛才提到的 50% 規則。我們需要通過不允許 SRE 組織或其任何子團隊退化為運營團隊來兌現這一承諾。

如果我們尋求將 SRE 花在瑣務上的時間限制在 50%，那麼這些時間是如何花費的呢？

任何值班的 SRE 都必須處理一定量的瑣務。一個典型的 SRE 在每個週期中有一周的主要值班和一周的次要值班（關於主要與次要值班的討論，請參閱「值班 (Being On-Call)」）。因此，在一個 6 人的輪換中，每 6 週中至少有 2 週專門用於值班和**處理中斷 (interrupt handling)**，這意味著潛在瑣務的下限是 SRE 時間的 2/6 = 33%。在一個 8 人的輪換中，下限是 2/8 = 25%。

與此資料一致，SRE 報告說他們最大的瑣務來源是中斷（即，非緊急的服務相關消息和電子郵件）。第二大來源是值班（緊急）響應，其次是發布和推送。儘管我們的發布和推送過程通常有相當程度的自動化處理，但在這個領域仍有很大的改進空間。

Google SRE 的季度調查顯示，花在瑣務上的平均時間約為 33%，所以我們比我們 50% 的總體目標做得好得多。然而，平均值並不能反映異常值：一些 SRE 聲稱瑣務為 0%（純開發專案，沒有值班工作），而另一些則聲稱瑣務為 80%。當個別 SRE 報告過多的瑣務時，這通常表明管理者需要更均勻地在團隊中分配瑣務負擔，並鼓勵那些 SRE 找到令人滿意的工程專案。

# 什麼才算是工程？

工程工作是新穎的，本質上需要人類的判斷力。它為您的服務帶來永久性的改進，並由策略指導。它常常是創造性和創新的，採用設計驅動的方法來解決問題——越通用越好。工程工作幫助您的團隊或 SRE 組織以相同的人員配置水平處理更大的服務或更多的服務。

典型的 SRE 活動大致可分為以下幾類：

每個 SRE 在幾個季度或一年的平均時間內，至少需要將 50% 的時間花在工程工作上。瑣務往往是尖峰式的，所以對於一些 SRE 團隊來說，穩定地將 50% 的時間花在工程上可能不現實，他們在某些季度可能會低於這個目標。但是，如果長期來看，花在專案上的時間比例平均顯著低於 50%，受影響的團隊就需要退後一步，找出問題所在。

# 瑣務總是不好的嗎？

瑣務並非總是讓每個人都不開心，尤其是在少量的情況下。可預測和重複性的任務可能相當令人平靜。它們能帶來成就感和快速的勝利。它們可以是低風險和低壓力的活動。有些人傾向於從事涉及瑣務的任務，甚至可能喜歡這種類型的工作。

瑣務並非總是且一成不變地是壞事，每個人都需要絕對清楚，在 SRE 角色中，乃至幾乎任何工程角色中，一定量的瑣務是不可避免的。少量瑣務是沒問題的，如果您對這些少量瑣務感到滿意，那麼瑣務就不是問題。當大量經歷瑣務時，它就變得有毒。如果您被過多的瑣務所累，您應該非常擔心並大聲抱怨。在太多瑣務不好的眾多原因中，請考慮以下幾點：

此外，花費過多時間在瑣務上而犧牲了工程時間，會以下列方式傷害 SRE 組織：

# 結論

如果我們都承諾每週通過一些好的工程來消除一點瑣務，我們將穩步清理我們的服務，並且我們可以將我們的集體努力轉向規模化工程、架構下一代服務以及構建跨 SRE 的工具鏈。讓我們多發明，少勞碌。

19 我們使用由英特爾的安迪·葛洛夫首創的目標與關鍵成果 (Objectives and Key Results) 系統；請參閱 [Kla12]。

20 Google 員工每週記錄他們工作的簡短自由格式摘要，或稱「摘要 (snippets)」。

21 我們必須小心，不要說一項任務「不是瑣務，因為它需要人類的判斷力」。我們需要仔細思考任務的性質是否本質上需要人類的判斷力，而不能通過更好的設計來解決。例如，有人可以（有些人已經）建立一個每天向其 SRE 發出數次警報的服務，其中每個警報都需要涉及大量人類判斷力的複雜響應。這樣的服務設計得很差，具有不必要的複雜性。該系統需要被簡化和重建，以消除潛在的故障條件或自動處理這些條件。在重新設計和重新實施完成，並推出改進後的服務之前，應用人類判斷力來響應每個警報的工作絕對是瑣務。