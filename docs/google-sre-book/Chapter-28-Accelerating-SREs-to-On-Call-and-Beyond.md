# 加速 SRE 上手：從準 on-call 到專家之路

**如何為我的新手裝上噴射背包，同時讓資深 SRE 保持與時俱進？**

作者：Andrew Widdowson，編輯：Shylaja Nukala

## 您已聘請了下一位 SRE，現在該怎麼辦？

您已經為您的組織聘請了新員工，他們將以網站可靠性工程師（Site Reliability Engineer, SRE）的身份開始工作。現在您必須對他們進行在職培訓。前期對新 SRE 的教育和技術導向進行投資，將會塑造他們成為更優秀的工程師。這樣的培訓將加速他們達到熟練狀態，同時使他們的技能組合更加穩固和均衡。

成功的 SRE 團隊建立在信任之上；為了持續且全球化地維護一個服務，您需要相信您的 on-call 同事們了解系統的運作方式，能夠診斷非典型的系統行為，願意尋求幫助，並能在壓力下做出反應以化解危機。因此，從「一個新手需要學習什麼才能 on-call？」的角度來思考 SRE 教育是必要但不足夠的。鑑於信任的要求，您還需要問以下問題：

- 我現有的 on-call 人員如何評估新手是否準備好 on-call？
- 我們如何利用新進人員的熱情和好奇心，確保現有的 SRE 從中受益？
- 我可以讓我的團隊投入哪些既能促進每個人的教育，又能讓大家都喜歡的活動？

學員有著廣泛的學習偏好。認識到您將會聘請到具有這些混合偏好的人，如果只迎合一種風格而犧牲其他風格，那將是短視的。因此，沒有一種教育風格能最好地培訓新 SRE，當然也沒有一個神奇的公式適用於所有 SRE 團隊。表 28-1 列出了 Google SRE 熟知的推薦培訓實踐（及其對應的反模式）。這些實踐代表了多種可用的選項，旨在讓您的團隊無論是現在還是未來，都能在 SRE 概念上受到良好教育。

| 推薦實踐 | 反模式 |
| :--- | :--- |
| 為學員設計具體、循序漸進的學習體驗 | 用瑣碎工作（如警報/工單分類）淹沒學員來培訓他們；「火的考驗」 |
| 鼓勵逆向工程、統計思維和從基本原則出發 | 嚴格透過操作程序、檢查清單和劇本進行培訓 |
| 透過建議學員閱讀事後檢討報告來頌揚對失敗的分析 | 將中斷視為秘密，為了避免指責而將其掩埋 |
| 為學員創造受控但真實的故障，讓他們使用真實的監控和工具進行修復 | 讓學員在已經 on-call 後才有第一次修復問題的機會 |
| 以團隊形式進行理論上的災難角色扮演，以融合團隊的問題解決方法 | 在團隊中創造專家，其技術和知識是孤立的 |
| 讓學員及早跟隨他們的 on-call 輪班，並與 on-call 人員比較筆記 | 在學員對其服務有全面了解之前，就將他們推上主要 on-call 的位置 |
| 將學員與專家 SRE 配對，以修訂 on-call 培訓計畫的特定部分 | 將 on-call 培訓計畫視為靜態且不可觸碰的，除非由主題專家修改 |
| 為學員規劃重要的專案工作，讓他們在技術棧中獲得部分所有權 | 將所有新專案工作分配給最資深的 SRE，讓資淺 SRE 撿剩餘的工作 |

本章的其餘部分將介紹我們發現在加速 SRE 上手 on-call 及之後的過程中非常有效的主要主題。這些概念可以在一個用於引導 SRE 的藍圖中形象化（圖 28-1）。

這張圖描繪了 SRE 團隊可以選擇的最佳實踐，以幫助引導新成員，同時保持資深人才的活力。您可以從這裡的眾多工具中，挑選最適合您團隊的活動。

該圖有兩個軸：
- **x 軸** 代表不同類型工作之間的頻譜，從抽象到應用的活動。
- **y 軸** 代表時間。從上到下閱讀，新 SRE 對他們將要負責的系統和服務知之甚少，因此詳細說明這些系統過去如何失敗的事後檢討報告是一個很好的起點。新 SRE 也可以嘗試從基礎開始逆向工程系統，因為他們是從零開始。一旦他們對系統有了更多了解並做了一些實作，SRE 就準備好跟隨 on-call 並開始修補不完整或過時的文件。

解讀此圖的提示：
- **On-call 是一個里程碑**：在 SRE 的職業生涯中，on-call 是一個里程碑，此後學習變得更加模糊、不確定和自我導向——因此在 SRE on-call 或之後發生的活動周圍有虛線。
- **專案工作與所有權的三角形狀**：表示專案工作從小型開始，隨著時間推移而建立，變得更加複雜，並可能在 on-call 後持續很長時間。
- **學習模式的多樣性**：一些活動和實踐非常抽象/被動，一些則非常應用/主動。有幾種活動是兩者的混合。擁有各種學習模式以適應不同的學習風格是很好的。
- **適當的節奏**：為了達到最大效果，培訓活動和實踐應該有適當的節奏：有些適合立即進行，有些應該在 SRE 正式 on-call 前夕進行，有些則應該是持續不斷的，即使是經驗豐富的 SRE 也應如此。具體的學習體驗應該在 SRE on-call 之前的整個時間內發生。

# 初始學習體驗：結構勝於混亂的理由

正如本書其他地方所討論的，SRE 團隊自然會混合進行**主動性**和**被動性**的工作。每個 SRE 團隊都應該有一個強烈的目標，即透過充分的主動性來控制和減少被動性工作，而您引導新進人員的方法也不應例外。思考以下這個過於常見但 leider 次佳的引導流程：

> John 是 FooServer SRE 團隊的最新成員。這個團隊的資深 SRE 們被指派了大量繁重的工作，例如回應工單、處理警報和執行乏味的二進位檔案部署。在 John 上班的第一天，他被指派了所有新進的工單。他被告知可以請求任何 SRE 團隊成員的幫助，以獲得解讀工單所需的背景知識。「當然，你一開始需要做很多學習，」John 的經理說。「但最終你會在處理這些工單上變得快得多。有一天，你會豁然開朗，並且會對我們使用的所有工具、我們遵循的程序以及我們維護的系統有深入的了解。」一位資深團隊成員評論說：「我們這是把你扔進游泳池的深水區。」

這種「火的考驗」方法來引導新手，通常源於團隊當前的環境；由運營驅動、被動反應的 SRE 團隊，通過讓他們的新成員……嗯，反覆地做出反應來「培訓」他們。如果你幸運的話，那些本來就擅長應對模糊性的工程師會從你為他們挖的坑裡爬出來。但更有可能的是，這種策略已經疏遠了好幾位有能力的工程師。雖然這種方法最終可能會培養出優秀的運營員工，但其結果將達不到目標。火的考驗方法也預設了團隊的許多或大部分方面可以嚴格通過「做」而非「推理」來教導。如果工單隊列中遇到的工作集合足以為該工作提供充分的培訓，那麼這就不是一個 SRE 的職位。

SRE 學員會有以下問題：
- 我在做什麼？
- 我取得了多少進展？
- 這些活動何時能累積足夠的經驗讓我去 on-call？

從前一家公司或大學跳槽，同時將工作角色（從傳統的軟體工程師或傳統的系統管理員）轉變為這個模糊的網站可靠性工程師角色，通常足以讓學員的信心下降好幾次。對於更內省的個性（尤其是關於問題＃2 和＃3），由模糊或不清晰的答案引起的不確定性可能導致發展緩慢或留任問題。相反，請考慮以下各節中概述的方法。這些建議與任何工單或警報一樣具體，但它們也是循序漸進的，因此更有回報。

## 累積且有序的學習路徑

在您的系統中加入一些學習順序，以便您的新 SRE 能夠看到前方的路徑。任何類型的培訓都比隨機的工單和中斷要好，但要有意識地努力結合理論和應用的正確組合：在新手學習旅程中會多次出現的抽象概念應該在他們教育的前期加載，同時學員也應盡快獲得實作經驗。

學習您的技術棧和子系統需要一個起點。考慮一下是按目的的相似性，還是按正常情況下的執行順序將培訓組合在一起更有意義。例如，如果您的團隊負責一個即時的、面向用戶的服務棧，可以考慮如下的課程順序：

1. 負載平衡
2. 前端伺服器
3. 後端伺服器
4. 儲存層

您選擇如何呈現學習機會（非正式的白板討論、正式的講座或實作的探索練習）取決於您和幫助您建構、設計和提供培訓的 SRE。Google Search SRE 團隊透過一份名為「on-call 學習檢查清單」的文件來建構這種學習。一個簡化的 on-call 學習檢查清單部分可能如下所示：

**技術：結果混合伺服器 (Mixer)**

- **前端服務**：前端伺服器
- **呼叫的後端**：結果檢索伺服器、地理位置伺服器、個人化資料庫
- **SRE 專家**：Sally W, Dave K, Jen P
- **開發者聯絡人**：Jim T, results-team@
- **繼續前需了解**：
    - 哪些叢集部署了 Mixer
    - 如何回滾 Mixer 的發布
    - Mixer 的哪些後端被視為「關鍵路徑」，以及為什麼
- **閱讀並理解以下文件**：
    - 結果混合概述：「查詢執行」部分
    - 結果混合概述：「生產」部分
    - Playbook：如何推出新的結果混合伺服器
    - Mixer 的性能分析
- **理解問題**：
    - Q：如果公司假日在正常的發布構建日發生，發布排程會如何改變？
    - Q：如何修復地理位置資料集的錯誤推送？

請注意，前述部分並未直接編碼程序、診斷步驟或劇本；相反，它是一個相對不受未來影響的文檔，嚴格專注於列舉專家聯絡人、突顯最有用的文件資源、建立必須收集和內化的基礎知識，以及提出只有在吸收了基礎知識後才能回答的探究性問題。它還提供了具體的成果，以便學員知道完成本節學習清單後將獲得何種知識和技能。

讓所有相關方了解受訓者保留了多少資訊是個好主意。雖然這種回饋機制可能不需要像測驗那樣正式，但讓學員完成一些關於您服務運作方式的家庭作業是一個好習慣。由學員的導師檢查的滿意答案，是學習應繼續到下一階段的標誌。關於您服務內部運作的問題可能類似於以下內容：

- 這個伺服器的哪些後端被認為是「在關鍵路徑上」，為什麼？
- 這個伺服器的哪些方面可以簡化或自動化？
- 您認為這個架構中的第一個瓶頸在哪裡？如果該瓶頸飽和，您可以採取哪些步驟來緩解它？

根據您服務的存取權限配置方式，您也可以考慮實施分層存取模型。第一層存取權限將允許您的學員對組件的內部運作有唯讀存取權，而後續的層級將允許他們改變生產狀態。滿意地完成 on-call 學習檢查清單的部分將為學員贏得對系統更深層次的存取權。Search SRE 團隊稱這些達到的級別為 on-call 途中的「powerups」，因為受訓者最終會被加入到最高級別的系統存取權限中。

## 有針對性的專案工作，而非瑣碎工作

SRE 是問題解決者，所以給他們一個棘手的問題來解決！剛開始時，即使在團隊的服務中擁有微小的所有權感，也能對學習產生奇效。反過來，這種所有權也可以在資深同事之間建立信任方面取得巨大進展，因為他們會向他們的資淺同事請教新的組件或流程。早期的所有權機會在 Google 整體上是標準的：所有工程師都會得到一個入門專案，旨在提供對基礎設施的足夠導覽，使他們能夠及早做出小而有用的貢獻。讓新 SRE 在學習和專案工作之間分配時間，也會給他們一種目的感和生產力，這在他們只花時間在學習或專案工作上是不會發生的。一些似乎運作良好的入門專案模式包括：

- 在服務棧中進行一個微不足道的用戶可見功能變更，並隨後將該功能發布一路引導至生產環境。理解開發工具鏈和二進位發布過程，可以培養對開發人員的同理心。
- 在您的服務中目前存在盲點的地方添加監控。新手將不得不思考監控邏輯，同時將他們對系統的理解與它實際（不當）行為的方式進行協調。
- 自動化一個還不夠痛苦到已經被自動化的痛點，為新 SRE 提供對 SRE 重視從日常運營中消除瑣事的價值的欣賞。

# 創造卓越的逆向工程師和即興思考者

我們可以提出一套如何培訓新 SRE 的指導方針，但是我們應該培訓他們什麼呢？培訓材料將取決於工作中使用的技術，但更重要的問題是：我們試圖創造什麼樣的工程師？在 SRE 運營的規模和複雜性下，他們不能僅僅是專注於運營的傳統系統管理員。除了具備大規模工程思維外，SRE 還應表現出以下特徵：

- 在他們的工作過程中，他們會遇到以前從未見過的系統，所以他們需要有**強大的逆向工程技能**。
- 在大規模下，會有一些難以檢測的異常，所以他們需要有**統計思維**的能力，而不是程序性思維，來揭示問題。
- 當標準操作程序失靈時，他們需要能夠**完全即興發揮**。

讓我們進一步研究這些屬性，以便我們能夠理解如何為我們的 SRE 配備這些技能和行為。

## 逆向工程師：弄清楚事物如何運作

工程師對於他們從未見過的系統如何運作感到好奇，或者更可能的是，他們過去非常了解的系統的當前版本如何運作。通過對您公司系統運作方式有基礎的了解，以及願意深入挖掘調試工具、RPC 邊界和您的二進位日誌以揭示其流程，SRE 將更有效地鎖定意外系統架構中的意外問題。教導您的 SRE 了解您應用程式的診斷和調試介面，並讓他們練習從這些介面揭示的資訊中得出推論，以便在處理未來的中斷時，這種行為變得反射性。

## 統計與比較思維者：壓力下的科學方法管理者

您可以將 SRE 處理大規模系統事件響應的方法，視為在他們面前展開的一個巨大決策樹中導航。在事件響應需求所提供的有限時間窗口內，SRE 可以從數百個行動中採取幾個，目標是緩解中斷，無論是短期還是長期。因為時間通常至關重要，SRE 必須有效率地修剪這個決策樹。這樣做的能力部分是通過經驗獲得的，而經驗只有隨著時間和接觸廣泛的生產系統才能獲得。這種經驗必須與仔細建構的假設相結合，當這些假設被證明或推翻時，會進一步縮小決策空間。換句話說，追蹤系統故障通常類似於玩一場「這些東西中哪個與其他不同？」的遊戲，其中「東西」可能包括內核版本、CPU 架構、您的技術棧中的二進位版本、區域流量組合或數百個其他因素。在架構上，團隊的責任是確保所有這些因素都可以被控制、單獨分析和比較。然而，我們也應該從他們工作的最早時刻起，就培訓我們最新的 SRE 成為優秀的分析師和比較者。

## 即興藝術家：當意外發生時

您嘗試了一個修復故障的方法，但它不起作用。故障系統背後的開發人員無處可尋。您現在該怎麼辦？您即興發揮！學習多種可以解決您問題部分的工具，讓您在自己的問題解決行為中實踐深度防禦。在面對中斷時過於程序化，從而忘記您的分析技能，可能是卡住和找到根本原因之間的區別。當 SRE 在其決策中帶入太多未經測試的關於中斷原因的假設時，一個陷入困境的故障排除案例可能會進一步加劇。證明 SRE 可能會陷入許多分析陷阱，這需要「放大視野」並採取不同的解決方法，是 SRE 早期學習的一個寶貴教訓。

鑑於高績效 SRE 的這三個理想屬性，我們可以為新 SRE 提供哪些課程和經驗，以便將他們引向正確的方向？您需要根據這些屬性，以及您 SRE 文化特有的其他屬性，來設計您自己的課程內容。讓我們考慮一個我們認為觸及了所有前述要點的課程。

## 綜合應用：逆向工程一個生產服務

> 「當到了學習 [Google 地圖棧的一部分] 的時候，[一位新 SRE] 問，她是否可以自己來做這件事——通過逆向工程課的技術學習一切，然後讓我們其他人糾正她/填補她錯過或弄錯的空白，而不是被動地讓別人向她解釋這個服務。結果呢？嗯，這可能比我來講解更正確、更有用，而我已經為此 on-call 超過 5 年了！」
>
> Paul Cowan，Google 網站可靠性工程師

我們在 Google 提供的一門受歡迎的課程叫做「逆向工程一個生產服務（無需其所有者的幫助）」。所呈現的問題場景起初看起來很簡單。整個 Google 新聞團隊——SRE、軟體工程師、產品管理等等——都去參加公司旅行：一次百慕達三角洲的郵輪之旅。我們已經 30 天沒有收到團隊的消息了，所以我們的學員是新任命的 Google 新聞 SRE 團隊。他們需要弄清楚服務棧從頭到尾是如何運作的，以便接管並保持其運行。

在被給予這個場景後，學員們被引導通過互動式、有目的的練習，在其中他們追蹤他們的網頁瀏覽器查詢通過 Google 基礎設施的入站路徑。在過程的每個階段，我們都強調學習多種發現生產伺服器之間連接性的方法是很重要的，這樣才不會錯過連接。在課程的中間，我們挑戰學員找到傳入流量的另一個端點，證明我們最初的假設範圍太窄。然後我們挑戰我們的學員找到進入技術棧的其他方式。我們利用我們生產二進位檔案高度儀器化的特性，它們會自我報告其 RPC 連接性，以及我們可用的白盒和黑盒監控，來確定用戶查詢所採取的路徑。一路上，我們建立一個系統圖，並討論我們的學員將來可能再次看到的共享基礎設施組件。

在課程結束時，學員們被賦予一項任務。每個學員回到他們的家鄉團隊，並請求一位資深 SRE 幫助他們選擇一個他們將要 on-call 的技術棧或技術棧的一部分。利用在課堂上學到的技能，學員然後自己繪製該技術棧的圖表，並將他們的發現呈現給資深 SRE。無疑，學員會錯過一些微妙的細節，這將成為一個很好的討論。資深 SRE 也很可能從這個練習中學到一些東西，暴露出他們對不斷變化的系統的先前理解的偏差。由於生產系統的快速變化，您的團隊歡迎任何重新熟悉系統的機會是很重要的，包括向團隊中最新而不是最老的成員學習。

# 準 on-call 人員的五項實踐

On-call 並不是任何 SRE 最重要的單一目的，但生產工程的職責通常確實涉及某種緊急通知覆蓋。一個能夠負責任地承擔 on-call 的人，是一個對他們工作的系統有合理深度和廣度理解的人。因此，我們將「能夠承擔 on-call」作為「知道足夠多並且能夠弄清楚其餘部分」的一個有用的代理。

## 對失敗的渴望：閱讀和分享事後檢討報告

> 「那些不能記取過去的人，注定要重蹈覆轍。」
>
> 喬治·桑塔亞那，哲學家和散文家

事後檢討報告（見《事後檢討文化：從失敗中學習》）是持續改進的重要組成部分。它們是一種無指責的方式，用以探究一次重大或可見中斷的多個根本原因。在撰寫事後檢討報告時，請記住，其最欣賞的讀者可能是一位尚未被聘用的工程師。無需徹底編輯，對我們最好的事後檢討報告進行細微的修改，就可以使它們成為「可教導的」事後檢討報告。

即使是最好的事後檢討報告，如果它們 languish 在虛擬文件櫃的底部，也無濟於事。因此，您的團隊應該收集和策劃有價值的事後檢討報告，作為未來新手的教育資源。一些事後檢討報告是例行公事，但提供對大規模系統結構性或新穎性失敗洞見的「可教導的事後檢討報告」，對新生來說如同黃金般珍貴。

事後檢討報告的所有權不僅限於作者身份。許多團隊以能夠存活下來並記錄下他們最大的中斷為榮。收集您最好的事後檢討報告，並將它們顯著地提供給您的新手，以及來自相關和/或集成團隊的感興趣方閱讀。請求相關團隊在您可以訪問的地方發布他們最好的事後檢討報告。

Google 的一些 SRE 團隊會舉辦「事後檢討讀書會」，在會上傳閱、預讀並討論引人入勝且富有洞見的事後檢討報告。事後檢討報告的原作者可以作為會議的榮譽嘉賓。其他團隊則組織「失敗故事」聚會，由事後檢討報告的作者半正式地進行介紹，重述中斷情況並有效地主導討論。

定期閱讀或介紹中斷情況，包括觸發條件和緩解步驟，對於建立新 SRE 的心智地圖和對生產及 on-call 響應的理解大有裨益。事後檢討報告也是未來抽象災難場景的絕佳燃料。

## 災難角色扮演

> 「每週我們都會開一次會，會上會選出一個受害者，在大家面前當場接受考驗，然後一個場景——通常是取自 Google 歷史真實案例的場景——會被拋給他或她。這位受害者，我把他想成是遊戲節目的參賽者，會告訴遊戲節目主持人他/她會做什麼或查詢什麼來理解或解決問題，然後主持人會告訴受害者每個行動或觀察的結果。這就像 SRE 版的 Zork。你身處一個由曲折的監控控制台組成的迷宮中，所有都一樣。你必須拯救無辜的用戶，使其免於滑入『過度查詢延遲的深淵』，拯救資料中心免於『近乎必然的熔毀』，並使我們所有人免於『錯誤的 Google Doodle 顯示』的尷尬。」
>
> Robert Kennedy，前 Google Search 和 healthcare.gov 網站可靠性工程師

當您有一群經驗水平差異極大的 SRE 時，您能做些什麼來將他們聚集在一起，並讓他們互相學習？您如何將團隊的 SRE 文化和解決問題的本質灌輸給新手，同時又讓飽經風霜的老手了解您技術棧中的新變化和新功能？Google SRE 團隊通過定期進行災難角色扮演這一歷史悠久的傳統來應對這些挑戰。這個練習通常被稱為「厄運之輪」或「走跳板」。這些標題賦予練習的幽默危險感，使其對新聘請的 SRE 來說不那麼令人生畏。

在最好的情況下，這些練習成為每週一次的儀式，團隊中的每個成員都能從中學到東西。公式很簡單，與桌上角色扮演遊戲（RPG）有些相似：「遊戲管理員」（GM）挑選兩位團隊成員擔任主要和次要 on-call；這兩位 SRE 和 GM 一起站在房間的前面。一個傳入的頁面被宣布，on-call 團隊以他們會做什麼來緩解和調查中斷來回應。

GM 精心準備了一個即將展開的場景。這個場景可能基於一次以前的中斷，當時較新的團隊成員還不在，或者較老的團隊成員已經忘記了。或者，這個場景可能是一次對技術棧中新的或即將推出的功能的假設性故障的探索，使得房間裡的所有成員都同樣沒有準備好應對這種情況。更好的是，一位同事可能在生產中發現了一個新的、新穎的故障，而今天的場景則擴展了這個新的威脅。

在接下來的 30-60 分鐘內，主要和次要 on-call 人員試圖找出問題的根本原因。GM 樂於在問題展開時提供額外的背景資訊，或許會告知 on-call 人員（和他們的觀眾）在中斷期間他們的監控儀表板上的圖表會是什麼樣子。如果事件需要升級到本團隊之外，GM 會假裝是那個其他團隊的成員，以配合場景的需要。沒有虛擬場景是完美的，所以有時 GM 可能需要通過將 on-call 人員從無關的線索中引導回來，通過添加其他刺激來引入緊迫性和清晰度，或者提出緊急而尖銳的問題，來引導參與者回到正軌。

當您的災難 RPG 成功時，每個人都會學到一些東西：也許是一個新的工具或技巧，一個解決問題的不同視角，或者（對新團隊成員來說尤其令人滿意）一個驗證，即如果您被選中，您本可以解決本週的問題。如果運氣好的話，這個練習會激勵隊友們熱切期待下週的冒險，或者請求成為下週的遊戲管理員。

## 破壞真實的東西，修復真實的東西

一個新手可以通過閱讀文件、事後檢討報告和參加培訓來學到很多關於 SRE 的知識。災難角色扮演可以幫助新手進入遊戲狀態。然而，從親手破壞和/或修復真實生產系統中獲得的經驗甚至更好。一旦新手 on-call，將會有大量的實踐經驗時間，但這種學習應該在新 SRE 達到那個點之前發生。因此，為了培養學員對使用公司工具和監控來應對發展中中斷的反射性反應，應更早地提供這種實踐經驗。

在這些互動中，真實性至關重要。理想情況下，您的團隊有一個多宿主且配置方式允許您至少有一個實例可以從即時流量中轉移出來，並暫時借給學習練習。或者，您可能有一個較小但功能齊全的預備或 QA 實例，可以借用一小段時間。如果可能的話，讓技術棧承受模擬真實用戶/客戶端流量的合成負載，如果可能的話，還包括資源消耗。

從合成負載下的真實生產系統中學習的機會是豐富的。資深 SRE 經歷過各種各樣的麻煩：配置錯誤、記憶體洩漏、性能回歸、崩潰的查詢、儲存瓶頸等等。在這個現實但相對無風險的環境中，監考人員可以以改變技術棧行為的方式操縱作業集，迫使新 SRE 找到差異，確定促成因素，並最終修復系統以恢復適當的行為。

作為要求資深 SRE 精心策劃特定類型故障讓新 SRE 修復的開銷的替代方案，您也可以反向操作，進行一個也可能增加整個團隊參與度的練習：從一個已知的良好配置開始，在選定的瓶頸處慢慢損壞技術棧，通過您的監控觀察上游和下游的影響。這個練習受到 Google Search SRE 團隊的重視，他們版本的這個練習叫做「讓我們把一個搜索叢集燒掉吧！」練習過程如下：

- 作為一個團隊，我們討論當我們削弱技術棧時，哪些可觀察的性能特徵可能會改變。
- 在造成計劃中的損害之前，我們向參與者徵求他們對系統將如何反應的猜測和理由。
- 我們驗證假設並證明我們看到的行為背後的理由。

我們每季進行一次這個練習，它會抖出我們急於修復的新錯誤，因為我們的系統並不總是像我們預期的那樣優雅地降級。

## 以文件撰寫為師徒制

許多 SRE 團隊維護一份「on-call 學習檢查清單」，這是一份有組織的閱讀和理解清單，內容涉及他們維護的系統相關的技術和概念。學員在有資格擔任影子 on-call 之前，必須內化這份清單。花點時間重新審視表 28-2 中的 on-call 學習檢查清單範例。學習檢查清單對不同的人有不同的目的：

- **對學員**：這份文件有助於建立他們團隊支持的系統的邊界。通過學習這份清單，學員可以了解哪些系統最重要以及為什麼。當他們理解了其中的資訊後，他們可以轉向需要學習的其他主題，而不是糾纏於可以隨時間學習的深奧細節。
- **對導師和經理**：可以觀察學員在學習檢查清單上的進展。檢查清單回答了諸如：你今天在做哪個部分？哪個部分最令人困惑？
- **對所有團隊成員**：這份文件成為一個社會契約，學員（在掌握後）憑此加入 on-call 的行列。學習檢查清單設定了所有團隊成員都應該追求和維護的標準。

在一個快速變化的環境中，文件可能很快就會過時。過時的文件對已經跟上進度的資深 SRE 來說問題不大，因為他們在自己的頭腦中保持著對世界及其變化的狀態。新手 SRE 更需要最新的文件，但可能覺得自己沒有權力或知識來做出改變。當 on-call 文件設計得恰到好處的結構時，它可以成為一個適應性強的工作體，利用新手的熱情和資深的知識來保持每個人的新鮮感。

在 Search SRE 中，我們通過審查我們的 on-call 學習檢查清單，並按其更新程度對其各個部分進行排序，來預期新團隊成員的到來。當新團隊成員到來時，我們向他們指出整體的學習檢查清單，但也要求他們徹底修改一兩個最過時的部分。如您在表 28-2 中所見，我們為每項技術標註了資深 SRE 和開發者聯絡人。我們鼓勵學員及早與那些主題專家建立聯繫，以便他們可以直接學習所選技術的內部運作。後來，當他們對學習檢查清單的範圍和語氣更加熟悉時，他們被期望貢獻一個修訂過的學習檢查清單部分，該部分必須由一個或多個被列為專家的資深 SRE 進行同行評審。

## 及早且頻繁地跟隨 On-Call

最終，沒有任何數量的假設性災難演習或其他培訓機制能夠完全為 SRE 準備好 on-call。歸根結底，從學習的角度來看，處理真實的中斷總是比參與假設性情況更有益。然而，讓新手等到他們第一次真正接到頁面才有機會學習和保留知識是不公平的。

在學員完成了所有系統基礎知識（例如，通過完成 on-call 學習檢查清單）之後，可以考慮配置您的警報系統，將傳入的頁面複製給您的新手，起初僅在工作時間內。依靠他們的好奇心來引導。這些「影子」on-call 輪班是導師了解學員進展的好方法，也是學員了解 on-call 職責的好方法。通過安排新手跟隨他們團隊的多個成員，團隊將越來越習慣這個人加入 on-call 輪班的想法。以這種方式灌輸信心是建立信任的有效方法，讓更資深的成員在他們不 on-call 時能夠脫離，從而有助於避免團隊倦怠。

當一個頁面傳入時，新 SRE 不是指定的 on-call 人員，這個條件消除了學員的任何時間壓力。他們現在可以在中斷展開時坐在前排觀看，而不是在問題解決之後。可能的情況是，學員和主要 on-call 人員共享一個終端會話，或者坐得很近以便隨時比較筆記。在中斷完成後的一個雙方方便的時間，on-call 人員可以為學員回顧所遵循的推理和流程。這個練習將增加影子 on-call 人員對實際發生情況的記憶。

如果發生了需要撰寫事後檢討報告的中斷，on-call 人員應將新手列為共同作者。不要將撰寫工作完全推給學員，因為這可能會被誤解為事後檢討報告是某種可以推給最資淺人員的繁重工作。造成這種印象將是一個錯誤。

一些團隊還會包括一個最後的步驟：讓經驗豐富的 on-call 人員「反向跟隨」學員。新手將成為主要 on-call 並負責所有傳入的升級，但經驗豐富的 on-call 人員將在暗中潛伏，獨立診斷情況而不修改任何狀態。經驗豐富的 SRE 將在必要時提供積極的支持、幫助、驗證和提示。

# On-Call 及以後：成年禮與持續教育的實踐

隨著理解力的增加，學員將在其職業生涯中達到一個點，他們能夠舒適地推理出大部分的技術棧，並能夠即興應對其餘部分。在這一點上，他們應該為他們的服務 on-call。一些團隊會創建一種最後的考試，在授予他們 on-call 的權力和責任之前，最後一次測試他們的學員。其他新 SRE 則提交他們完成 on-call 學習檢查清單的證明，以證明他們已經準備好了。無論您如何把關這個里程碑，on-call 都是一個成年禮，應該作為一個團隊來慶祝。

學習會在學員加入 on-call 行列後停止嗎？當然不會！為了作為 SRE 保持警惕，您的團隊將永遠需要積極主動，並意識到即將到來的變化。當您的注意力在別處時，您的技術棧的部分可能被重新架構和擴展，使得您團隊的運營知識充其量只是歷史性的。

為您的整個團隊建立一個定期的學習系列，由負責引導變更的 SRE 以簡報的形式介紹您的技術棧中新的和即將到來的變更的概述，他們可以根據需要與開發人員共同介紹。如果可以的話，錄製簡報，以便您可以為未來的學員建立一個培訓庫。

經過一些實踐，您將會從您團隊內的 SRE 和與您團隊密切合作的開發人員那裡獲得大量及時的參與，同時讓每個人的頭腦對未來保持新鮮。還有其他的教育參與場所：考慮讓 SRE 向您的開發者同行發表演講。您的開發同行越了解您的工作和您團隊面臨的挑戰，就越容易在後來的專案上達成充分知情的決策。

# 結論

對 SRE 的前期培訓投資絕對是值得的，無論是對於渴望掌握其生產環境的學員，還是對於樂於歡迎學員加入 on-call 行列的團隊。通過使用本章中概述的適用實踐，您將更快地培養出全面的 SRE，同時永久性地磨練團隊技能。您如何應用這些實踐取決於您，但任務是明確的：作為 SRE，您必須比擴展您的機器更快地擴展您的人力。祝您和您的團隊在創造學習和教學的文化方面好運！
