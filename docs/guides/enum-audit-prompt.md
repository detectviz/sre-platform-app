# SRE Platform 枚舉值全面審查提示詞

## 🎯 審查目標

請對 SRE Platform 系統進行全面的枚舉值一致性審查，確保：

1. **枚舉值統一性**: 所有枚舉值都使用小寫格式，沒有例外
2. **枚舉值完整性**: 枚舉選項涵蓋所有業務場景，沒有遺漏
3. **枚舉值一致性**: 同一個枚舉值在所有地方（TypeScript、資料庫、API文檔、Mock數據、前端組件）都完全一致
4. **枚舉值合理性**: 枚舉值的設計符合實際業務需求和使用情境

## 📋 審查範圍

### 1. TypeScript 類型定義 (`types.ts`)
- 檢查所有枚舉類型定義
- 確認枚舉值都是小寫格式
- 驗證枚舉值的完整性

### 2. 資料庫結構 (`db_schema.sql`)
- 檢查所有 ENUM 類型定義
- 確認枚舉值與 TypeScript 完全一致
- 驗證枚舉值的順序和拼寫

### 3. OpenAPI 文檔 (`openapi-specs/`)
- 檢查所有 schema 中的 enum 定義
- 檢查所有 example 中的枚舉值使用
- 確認枚舉值與 TypeScript 一致

### 4. Mock Server (`mock-server/`)
- 檢查 `db.ts` 中的模擬數據
- 檢查 `handlers.ts` 中的枚舉值驗證邏輯
- 確認所有枚舉值使用都正確

### 5. 前端組件 (`src/`)
- 檢查所有枚舉值的使用
- 確認枚舉值與 TypeScript 定義一致
- 驗證枚舉值在 UI 中的顯示邏輯

## 🔍 詳細審查項目

### A. 枚舉值統一性檢查

#### 檢查清單：
- [ ] 所有枚舉值都是小寫英文字母
- [ ] 多個單詞使用下劃線 `_` 分隔
- [ ] 沒有駝峰式命名 (camelCase)
- [ ] 沒有大寫字母開頭
- [ ] 沒有混合大小寫的情況

#### 特殊情況：
- 中文枚舉值保持原有格式（如：`'自訂'`, `'無'`）
- 縮寫保持小寫（如：`'k8s'`, `'snmp'`）

### B. 枚舉值完整性檢查

#### 業務邏輯完整性：
- [ ] 事件狀態涵蓋所有可能狀態
- [ ] 資源狀態涵蓋所有監控場景
- [ ] 用戶角色滿足權限管理需求
- [ ] 通知通道涵蓋主流通訊方式
- [ ] 資料來源類型涵蓋常見監控系統

#### 枚舉值合理性：
- [ ] 枚舉值的語意明確，不會產生歧義
- [ ] 枚舉值的粒度適中，不會過於細分或過於粗糙
- [ ] 枚舉值之間的區分標準一致
- [ ] 新增枚舉值時不會破壞現有邏輯

### C. 枚舉值一致性檢查

#### 跨系統一致性：
- [ ] TypeScript 定義與資料庫 schema 完全一致
- [ ] API 文檔與 TypeScript 定義完全一致
- [ ] Mock 數據與 TypeScript 定義完全一致
- [ ] 前端使用與 TypeScript 定義完全一致

#### 命名一致性：
- [ ] 枚舉類型名稱使用 PascalCase
- [ ] 枚舉值名稱使用 snake_case（對於多個單詞）
- [ ] 枚舉值的語意在各處保持一致

### D. 枚舉值使用檢查

#### 前端組件檢查：
- [ ] 枚舉值在下拉選單中的顯示文字正確
- [ ] 枚舉值在狀態標籤中的顏色映射正確
- [ ] 枚舉值在篩選條件中的選項完整
- [ ] 枚舉值在表單驗證中的檢查邏輯正確

#### API 檢查：
- [ ] 枚舉值在請求參數中的驗證正確
- [ ] 枚舉值在響應數據中的格式正確
- [ ] 枚舉值在錯誤訊息中的描述正確

#### 資料庫檢查：
- [ ] 枚舉值在表結構中的定義正確
- [ ] 枚舉值在默認值設置中正確
- [ ] 枚舉值在索引和約束中正確

## 🚨 常見問題檢查

### 1. 拼寫錯誤
- [ ] 檢查是否有拼寫錯誤（如：`recieved` 應該是 `received`）
- [ ] 檢查是否有大小寫錯誤
- [ ] 檢查是否有額外的空格或符號

### 2. 邏輯錯誤
- [ ] 檢查枚舉值的順序是否合理
- [ ] 檢查是否有重複的枚舉值
- [ ] 檢查是否有應該合併的枚舉值

### 3. 遺漏檢查
- [ ] 檢查是否有新的業務場景需要新的枚舉值
- [ ] 檢查是否有過時的枚舉值需要移除
- [ ] 檢查枚舉值的範圍是否涵蓋所有使用場景

### 4. 一致性錯誤
- [ ] 檢查枚舉值在不同文件中的拼寫是否一致
- [ ] 檢查枚舉值的定義是否在所有地方都存在
- [ ] 檢查枚舉值的使用是否與定義一致

## 📊 審查報告格式

### 問題分類：

#### 🚨 嚴重問題 (Blocker)
- 枚舉值拼寫錯誤導致編譯失敗
- 枚舉值缺失導致功能無法正常工作
- 枚舉值不一致導致數據錯誤

#### ⚠️ 重要問題 (Major)
- 枚舉值大小寫不統一
- 枚舉值在某些地方缺失
- 枚舉值的語意不一致

#### ℹ️ 一般問題 (Minor)
- 枚舉值的顯示文字可以優化
- 枚舉值的順序可以調整
- 文檔中的枚舉值描述可以完善

#### 💡 改進建議 (Enhancement)
- 新增枚舉值的建議
- 枚舉值分類的優化
- 枚舉值命名的改進

### 報告結構：

```
## 枚舉值審查報告

### 總體評估
- 總枚舉值數量：X 個
- 發現問題數量：X 個
- 嚴重問題：X 個
- 重要問題：X 個
- 一般問題：X 個

### 詳細問題列表

#### 1. 枚舉值統一性問題
- **位置**: `types.ts:134`
- **問題**: `IncidentSeverity` 枚舉值包含大寫字母
- **建議**: 將所有枚舉值改為小寫

#### 2. 枚舉值完整性問題
- **位置**: `types.ts:479`
- **問題**: `NotificationChannelType` 缺少 'teams' 選項
- **建議**: 添加 Teams 通知通道支持

#### 3. 枚舉值一致性問題
- **位置**: `db_schema.sql:22` vs `types.ts:134`
- **問題**: 資料庫枚舉值順序與 TypeScript 不一致
- **建議**: 統一枚舉值的順序

### 修復建議

#### 優先級 1 (緊急修復)
1. 修復所有編譯錯誤相關的枚舉值問題
2. 統一所有枚舉值的大小寫格式

#### 優先級 2 (重要修復)
1. 補充缺失的枚舉值
2. 修復枚舉值在各系統間的不一致

#### 優先級 3 (優化改進)
1. 優化枚舉值的顯示文字
2. 完善枚舉值的文檔描述

### 驗證步驟

請按照以下步驟驗證修復結果：

1. **編譯檢查**: `npm run build` 成功
2. **Mock Server**: `npm run mock-server` 正常啟動
3. **API 測試**: 所有枚舉值相關的 API 正常工作
4. **前端測試**: 枚舉值在 UI 中正確顯示
```

## 🎯 審查重點提醒

1. **系統性思考**: 枚舉值的修改會影響整個系統，需要考慮所有相關部分
2. **向後兼容性**: 枚舉值的修改可能影響現有數據，需要評估遷移成本
3. **業務影響**: 枚舉值的修改可能改變業務邏輯，需要確認業務部門的接受度
4. **測試覆蓋**: 枚舉值相關的功能需要充分測試，確保沒有邊界情況

## 📞 聯繫方式

如有疑問或需要進一步討論，請聯繫：
- 架構師：負責系統整體設計
- 後端工程師：負責 API 和資料庫實現
- 前端工程師：負責用戶界面實現
- QA 工程師：負責測試和驗證
