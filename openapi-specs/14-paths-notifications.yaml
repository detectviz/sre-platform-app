# Notifications API Paths
paths:
  /settings/notification-channels:
    get:
      tags: [Settings, Notifications]
      summary: List notification channels
      description: Retrieve a paginated list of notification channels.
      operationId: listNotificationChannels
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/PageSizeParam"
        - $ref: "#/components/parameters/SortByParam"
        - $ref: "#/components/parameters/SortOrderParam"
        - name: keyword
          in: query
          schema:
            type: string
      responses:
        "200":
          description: A paginated list of notification channels.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedNotificationChannels"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      tags: [Settings, Notifications]
      summary: Create notification channel
      description: Create a new notification channel.
      operationId: createNotificationChannel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationChannelCreate"
      responses:
        "201":
          description: Channel created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannel"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-channels/{id}:
    parameters:
      - $ref: "#/components/parameters/IdParam"
    patch:
      tags: [Settings, Notifications]
      summary: Update notification channel
      description: Update an existing notification channel.
      operationId: updateNotificationChannel
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationChannelUpdate"
      responses:
        "200":
          description: Channel updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannel"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      tags: [Settings, Notifications]
      summary: Delete notification channel
      description: Soft delete a notification channel.
      operationId: deleteNotificationChannel
      responses:
        "204":
          description: Channel deleted successfully.
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-channels/batch-actions:
    post:
      tags: [Settings, Notifications]
      summary: Batch update notification channels
      description: Batch enable, disable, or delete notification channels.
      operationId: batchUpdateNotificationChannels
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [action, ids]
              properties:
                action:
                  type: string
                  enum: [enable, disable, delete]
                ids:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Batch operation completed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BatchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-channels/{id}/test:
    parameters:
      - $ref: "#/components/parameters/IdParam"
    post:
      tags: [Settings, Notifications]
      summary: Test notification channel
      description: Send a test notification and update the last test result.
      operationId: testNotificationChannel
      responses:
        "200":
          description: Test notification sent.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  result:
                    type: string
                  message:
                    type: string
                  tested_at:
                    type: string
                    format: date-time
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-strategies:
    get:
      tags: [Settings, Notifications]
      summary: List notification strategies
      description: Retrieve a paginated list of notification strategies.
      operationId: listNotificationStrategies
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/PageSizeParam"
        - $ref: "#/components/parameters/SortByParam"
        - $ref: "#/components/parameters/SortOrderParam"
        - name: keyword
          in: query
          schema:
            type: string
      responses:
        "200":
          description: A paginated list of notification strategies.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedNotificationStrategies"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"
    post:
      tags: [Settings, Notifications]
      summary: Create notification strategy
      description: Create a new notification strategy.
      operationId: createNotificationStrategy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationStrategyCreate"
      responses:
        "201":
          description: Strategy created successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationStrategy"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-strategies/{id}:
    parameters:
      - $ref: "#/components/parameters/IdParam"
    patch:
      tags: [Settings, Notifications]
      summary: Update notification strategy
      description: Update an existing notification strategy.
      operationId: updateNotificationStrategy
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationStrategyUpdate"
      responses:
        "200":
          description: Strategy updated successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationStrategy"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"
    delete:
      tags: [Settings, Notifications]
      summary: Delete notification strategy
      description: Soft delete a notification strategy.
      operationId: deleteNotificationStrategy
      responses:
        "204":
          description: Strategy deleted successfully.
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-strategies/batch-actions:
    post:
      tags: [Settings, Notifications]
      summary: Batch update notification strategies
      description: Batch enable, disable, or delete notification strategies.
      operationId: batchUpdateNotificationStrategies
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [action, ids]
              properties:
                action:
                  type: string
                  enum: [enable, disable, delete]
                ids:
                  type: array
                  items:
                    type: string
      responses:
        "200":
          description: Batch operation completed.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BatchResult"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-history:
    get:
      tags: [Settings, Notifications]
      summary: List notification history
      description: Retrieve a paginated list of notification history records.
      operationId: listNotificationHistory
      parameters:
        - $ref: "#/components/parameters/PageParam"
        - $ref: "#/components/parameters/PageSizeParam"
        - $ref: "#/components/parameters/SortByParam"
        - $ref: "#/components/parameters/SortOrderParam"
      responses:
        "200":
          description: A paginated list of notification history records.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaginatedNotificationHistoryRecords"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /settings/notification-history/{id}/resend:
    parameters:
      - $ref: "#/components/parameters/IdParam"
    post:
      tags: [Settings, Notifications]
      summary: Resend notification
      description: Resend a specific notification from the history.
      operationId: resendNotificationHistory
      responses:
        "200":
          description: Notification has been re-sent.
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /notifications:
    get:
      tags: [Notifications]
      summary: List notifications
      description: Retrieve a paginated list of in-app notifications.
      operationId: listNotifications
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/PageSizeParam'
        - $ref: '#/components/parameters/SortByParam'
        - $ref: '#/components/parameters/SortOrderParam'
      responses:
        "200":
          description: Paginated notifications.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedNotifications'
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

  /notifications/read-all:
    post:
      tags: [Notifications]
      summary: Mark all notifications as read
      operationId: readAllNotifications
      responses:
        "200":
          description: All notifications marked as read.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimpleMessageResponse'
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalServerError"

components:
  schemas:
    PaginatedNotificationChannels:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/NotificationChannel'
        total:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
    PaginatedNotificationStrategies:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/NotificationStrategy'
        total:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
    PaginatedNotificationHistoryRecords:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/NotificationHistoryRecord'
        total:
          type: integer
        page:
          type: integer
        page_size:
          type: integer
    PaginatedNotifications:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/NotificationItem'
        total:
          type: integer
        page:
          type: integer
        page_size:
          type: integer