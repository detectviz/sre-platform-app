# SRE 平台功能規格 v2.20

本章節旨在提供一個全面的功能基準，按照平台導航結構，詳細描述每一個頁面的核心定位與功能。

### 1. SRE 戰情室 (`SREWarRoomPage`)

-   **定位**: 平台的核心儀表板，提供系統健康度的「駕駛艙視圖」。
-   **核心功能**:
    1.  **AI 每日簡報**: 由 AI 自動生成的系統狀態摘要，包含「穩定性總結」、「關鍵異常」和「建議操作」三個部分，並提供可操作的連結。
    2.  **服務健康度熱力圖**: 視覺化展示各個服務在不同環境的健康狀態。
    3.  **資源群組狀態**: 條列展示各個資源群組的健康、警告、嚴重狀態分佈。
    4.  **互動式圖表**: 所有圖表均支援點擊鑽取，可跳轉至相關的資源或事件頁面。

### 2. 事件 (Incidents)

#### 10.2.1 事件列表 (`IncidentListPage`)

-   **定位**: SRE 的「事故作戰室」，是一個高效的告警處理工作台。
-   **核心功能**:
    -   **列表檢視**: 以表格形式展示所有事件，包含摘要、狀態、嚴重性、處理人等關鍵資訊。
    -   **批次操作**: 支援對多個事件進行批次的「AI 分析」、「認領」和「解決」。
    -   **快速篩選**: 提供統一的搜尋與篩選入口，方便快速定位事件。
    -   **事件詳情**: 點擊單一事件，會以側邊抽屜 (Drawer) 的形式開啟「事故詳情」面板，進行深度調查與處理。
    -   **AI 分析**: 支援對單一或多個事件進行 AI 分析，自動生成根本原因與處理建議。

#### 10.2.2 告警規則 (`AlertRulePage`)

-   **定位**: 集中管理所有告警規則的入口，定義「什麼是問題」。
-   **核心功能**:
    -   **列表檢視**: 以表格形式展示所有告警規則，包含名稱、監控目標、觸發條件摘要、嚴重性、是否啟用自動化等關鍵資訊。
    -   **生命週期管理**: 支援規則的「新增」、「編輯」、「複製」與「刪除」。
    -   **快速啟用/停用**: 提供切換開關，可快速啟用或停用單一規則。
    -   **引導式建立/編輯 (Wizard)**:
        -   **目的**: 將複雜的規則設定拆解為清晰、專注的步驟，降低使用者的認知負擔。
        -   **編輯模式**: 在編輯現有規則時，精靈會直接從「步驟一：設定基本資訊」開始。
        -   **建立模式**:
            -   **步驟 0 - 選擇監控目標**:
                -   **介面**: 提供一個整合式的「範本市集」介面，左側為可篩選的「資源類型」，右側展示對應的告警範本卡片。
                -   **互動**: 使用者選擇一個範本（如「主機 CPU 使用率過高」）後，後續步驟的欄位將會被自動填入建議值，大幅簡化設定流程。
            -   **步驟 1 - 設定基本資訊**:
                -   定義規則的`名稱`、`描述`，並設定監控的`資源範圍`。
                -   監控範圍支援從「所有資源」、「特定資源群組」到「具體資源」的多層次選擇，並可附加標籤進行進一步篩選。
            -   **步驟 2 - 定義觸發條件**:
                -   設定告警的具體邏輯。支援 `(A AND B) OR C` 的複雜條件。
                -   每個 `OR` 條件群組可以獨立設定其觸發的`告警等級` (嚴重/警告/資訊)。
                -   每個 `AND` 條件包含`指標`、`運算子`、`閾值`和`持續時間`四個元素。
            -   **步驟 3 - 事件定義與通知**:
                -   客製化觸發事件時的`標題`和`內容`範本，支援使用 `{{變數}}`。
                -   為此規則及其產生的事件附加`標籤`，用於後續的通知路由和分類。
            -   **步驟 4 - 設定自動化響應 (可選)**:
                -   提供一個開關以`啟用自動化響應`。
                -   啟用後，使用者可以從下拉選單中選擇一個已存在的`自動化腳本`。
                -   若所選腳本包含參數，介面將動態呈現對應的輸入欄位，讓使用者可以為此規則配置固定的`參數值`。

#### 10.2.3 靜音規則 (`SilenceRulePage`)

-   **定位**: 管理用於在特定時間（如維護窗口）暫停告警通知的規則。
-   **核心功能**:
    -   **列表檢視**: 展示所有靜音規則，包含名稱、類型（單次/週期性）、靜音條件、排程與創建者。
    -   **生命週期管理**: 支援靜音規則的「新增」、「編輯」與「刪除」。
    -   **引導式建立/編輯**: 透過精靈引導使用者設定靜音規則的基本資訊、排程（支援單次時間區間或週期性的 CRON 表達式）以及要靜音的告警範圍（基於標籤匹配）。

### 3. 資源 (Resources)

-   **定位**: 平台的「資產與健康中心」，提供一個可探索的完整資產清單與資料來源治理能力。
-   **核心功能**:
    -   **頁籤式工作台**: 以 `資源列表`、`資源群組`、`拓撲視圖`、`Datasource 管理`、`自動掃描 (Discovery)` 等視圖組成，讓操作人員能在單一入口完成資產建模。
    -   **資源列表**: 提供豐富的欄位與篩選功能，並可點擊查看資源詳情。
    -   **資源群組**: 允許使用者基於標籤查詢，建立動態的資源集合，並指派負責團隊。
    -   **Datasource 管理**: 集中管理所有監控資料來源，支援建立、測試與禁用 Datasource，並提供健康檢查結果與最近同步狀態。
    -   **自動掃描 (Discovery)**:
        -   **任務列表**: 展示歷史與排程中的掃描任務，包含狀態、執行時間與負責人。
        -   **結果匯入**: 將掃描結果轉換為資源紀錄，支援人工審核後再入庫。
        -   **Exporter 綁定**: 將掃描到的節點快速綁定對應的監控 Exporter，確保資料可觀測。
    -   **拓撲視圖**: 視覺化展示服務與資源之間的依賴關係，節點與邊支援標籤篩選、顏色標示與快速跳轉資源詳情，並支援右鍵上下文選單進行快捷操作。
    -   **Edge Gateway 模式**: 用於邊緣場域的裝置監控，內建 Gateway 管理、佈署狀態監控，並支援 SNMP、Modbus、IPMI、MQTT 等協定資料的收集與轉換。

### 4. 儀表板 (Dashboard)

-   **定位**: 統一的系統監控與業務洞察儀表板入口。
-   **核心功能**:
    -   **混合儀表板支援**: 支援管理「內建儀表板」和連結外部「Grafana 儀表板」。
    -   **儀表板列表**: 以卡片形式展示所有儀表板，支援設定任一儀表板為個人首頁。
    -   **範本市集**: 提供一組預設的儀表板範本，使用者可以此為基礎快速建立新儀表板。
    -   **拖拽式編輯器**: 提供一個所見即所得的網格佈局編輯器，讓使用者可以自由拖動、縮放小工具，建立高度客製化的內建儀表板。

### 5. 事件與通知 (Incidents & Notifications)

-   **定位**: 從事件偵測到通知路由的整合作戰中樞。
-   **核心功能**:
    -   **事件列表**: 與 `IncidentListPage` 對應的清單工作台，支援批次操作、AI 分析與快速篩選。
    -   **事件詳情頁**: 以 Drawer 呈現的深入調查介面，內建血緣視覺化圖 (rule → metric → resource → action)，協助快速定位根因與已採取的動作。
    -   **通知策略編輯器**: 提供拖拽式 AND/OR 條件設定器，可視化顯示多層級條件組合，並即時預覽告警路由結果。
    -   **通知管道與歷史**: 管理所有通知通道並提供發送紀錄查詢與重送能力。

### 6. 自動化 (Automation)

-   **定位**: 提升維運效率、降低重複性工作的核心。
-   **核心功能**:
    -   **腳本庫**: 統一管理 Shell、Python、Ansible Playbook 等各類型的自動化腳本。支援「AI 輔助生成腳本」功能並提供版本控制與參數模板。
    -   **排程管理**: 以時間軸或列表呈現所有排程作業，支援 CRON 表達式設定、衝突提醒與排程啟停。
    -   **觸發器與整合**: 管理排程、Webhook、事件等觸發來源，並預留 `n8n Workflow` 整合入口供高階自動化流程編排。
    -   **執行日誌**: 提供所有腳本執行的詳細日誌與結果，用於審計與除錯，支援依時間、腳本、觸發來源篩選。
    
### 7. 智慧排查 (Intelligent Investigation)

-   **定位**: 平台的智慧大腦，提供從宏觀到微觀的深度洞察與趨勢預測。
-   **核心功能**:
    -   **總覽 (`AnalysisOverviewPage`)**: 整合式的智慧化分析中樞，匯聚 AI 洞察與跨域趨勢。
    -   **Logs Explorer (`LogExplorerPage`)**: 提供強大的日誌搜尋、篩選與即時串流功能，並支援「AI 日誌總結」。
    -   **Traces Explorer**: 支援分散式追蹤資料查詢，提供呼叫鏈視覺化、延遲熱點分析與相依服務關聯圖。
    -   **AI Insights**: 透過 RCA 模型與建議引擎，提供事件根因推論、修復建議與潛在風險預警。
    -   **容量規劃 (`CapacityPlanningPage`)**: 基於歷史數據和 AI 預測模型，提供對未來資源需求的預測和優化建議。

### 8. 設定 (Settings)

-   **定位**: 管理平台的全域性配置與治理控制。
-   **核心功能分區**:
    -   **身份與存取管理 (IAM)**:
        -   以 Keycloak 為核心，管理使用者、角色、團隊與審計紀錄，支援批次操作與權限範本。
        -   提供審計日誌視圖，記錄所有關鍵操作以符合治理需求。
    -   **多租戶管理**:
        -   支援 Realm/Role 隔離策略，提供租戶清單、配額與跨租戶資源治理設定。
    -   **標籤管理 (Tag Management)**:
        -   從設定模組獨立出專屬入口，提供標籤鍵值的建立、審核流程與使用頻率分析。
    -   **Grafana 設定**:
        -   提供 Endpoint 與 Token 驗證工具，支援即時測試並顯示最近同步狀態。
    -   **平台設定**:
        -   包含郵件設定、身份驗證與版面管理等全域配置。
    -   **License**:
        -   預留頁籤於展示版中隱藏，商業版可啟用以管理授權資訊與到期提醒。

### 9. 個人設定 (Profile)

-   **定位**: 使用者個人化的配置中心。
-   **核心功能**:
    -   **個人資訊**: 檢視與個人帳號相關的基本資訊。
    -   **安全設定**: 變更密碼、檢視登入歷史。
    -   **偏好設定**: 客製化個人化的平台體驗，如介面主題、預設首頁、語言和時區。